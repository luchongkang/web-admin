(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26041f2a"],{2430:function(e,t,a){},"333d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},r=[];a("c5f6");Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function s(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,a){var n=o(),r=e-n,l=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=l;var o=Math.easeInOutQuad(c,n,r,t);s(o),c<t?i(e):a&&"function"===typeof a&&a()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&l(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},u=c,d=(a("aad2"),a("2877")),g=Object(d["a"])(u,n,r,!1,null,"2ec91a81",null);t["a"]=g.exports},"5d3f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e.accessFilter("/v1/api/manager/addManager")?a("el-row",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.handleAdd}},[e._v("新增管理员账户")])],1)])],1):e._e(),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.id)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"登录账号",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.username)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"金币",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.gold/100)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"房卡",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.card)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"所属权限分组",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.groups,(function(t){return a("el-tag",{key:t.id,staticStyle:{margin:"2px"}},[e._v(e._s(t.name))])}))}}])}),e._v(" "),a("el-table-column",{attrs:{"class-name":"status-col",label:"状态",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e._f("statusFilter")(t.row.status)}},[e._v(e._s(e._f("getStatusName")(t.row.status,0)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.time)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e.accessFilter("/v1/api/manager/editManager")?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleEdit(n)}}},[e._v("修改")]):e._e(),e._v(" "),e.IsRechage(n.id)?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleChange(n)}}},[e._v("充值")]):e._e(),e._v(" "),e.accessFilter("/v1/api/manager/editStatus")?a("el-button",{attrs:{type:e._f("status")(n.status),size:"small"},on:{click:function(t){return e.handleStatus(n)}}},[e._v(e._s(e._f("getStatusName")(n.status,1)))]):e._e()]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.page,limit:e.size},on:{"update:page":function(t){e.page=t},"update:limit":function(t){e.size=t},pagination:e.fetchData}}),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,title:"edit"===e.dialogType?"编辑管理员":"新建管理员"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{model:e.manager,"label-width":"120px","label-position":"right"}},[a("el-form-item",{attrs:{label:"账号"}},[a("el-input",{attrs:{placeholder:"6到12位的大小写和数字"},model:{value:e.manager.username,callback:function(t){e.$set(e.manager,"username",t)},expression:"manager.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{placeholder:e.pwdTip,"show-password":""},model:{value:e.manager.password,callback:function(t){e.$set(e.manager,"password",t)},expression:"manager.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属权限分组"}},[a("el-checkbox-group",{model:{value:e.manager.role,callback:function(t){e.$set(e.manager,"role",t)},expression:"manager.role"}},e._l(e.group,(function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"昵称"}},[a("el-input",{attrs:{placeholder:"昵称"},model:{value:e.manager.nickname,callback:function(t){e.$set(e.manager,"nickname",t)},expression:"manager.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"备注"},model:{value:e.manager.comment,callback:function(t){e.$set(e.manager,"comment",t)},expression:"manager.comment"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogChange,title:"充值",width:"30%",center:""},on:{"update:visible":function(t){e.dialogChange=t}}},[a("el-form",{attrs:{model:e.recharge,"label-width":"120px","label-position":"right"}},[a("el-form-item",{attrs:{label:"当前余额："}},[e._v("\n        金币:"+e._s(e.gold)+"\n        房卡:"+e._s(e.card)+"\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"充值类型"}},[a("el-radio",{attrs:{label:"1",border:""},on:{change:e.rechargeType},model:{value:e.recharge.type,callback:function(t){e.$set(e.recharge,"type",t)},expression:"recharge.type"}},[e._v("金币")]),e._v(" "),a("el-radio",{attrs:{label:"2",border:""},on:{change:e.rechargeType},model:{value:e.recharge.type,callback:function(t){e.$set(e.recharge,"type",t)},expression:"recharge.type"}},[e._v("房卡")])],1),e._v(" "),a("el-form-item",{attrs:{label:"充值数量"}},[a("el-input",{attrs:{placeholder:"请输入数量",maxlength:"10","show-word-limit":""},model:{value:e.recharge.number,callback:function(t){e.$set(e.recharge,"number",t)},expression:"recharge.number"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogChange=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmRecharge}},[e._v("确定")])],1)],1)],1)},r=[],i=(a("96cf"),a("3b8d")),s=a("db72"),o=a("e285"),l=a("333d"),c=a("2f62"),u=a("31c2"),d={id:"0",username:"",nickname:"",password:"",comment:"",role:[]},g={id:"0",type:"1",number:"0"},m={components:{Pagination:l["a"]},filters:{getStatusName:function(e,t){var a=["正常","关闭"];return 1===t&&(a=["关闭","正常"]),a[e]},statusFilter:function(e){var t=["success","danger"];return t[e]},status:function(e){var t=["danger","success"];return t[e]}},data:function(){return{manager:Object.assign({},d),recharge:Object.assign({},g),dialogVisible:!1,page:1,total:0,size:10,pwdTip:"",group:[],dialogChange:!1,dialogType:"add",gold:0,card:0,checkRole:[],list:null,listLoading:!0}},computed:Object(s["a"])({},Object(c["b"])(["uid"])),created:function(){this.fetchData()},methods:{accessFilter:function(e){var t=Object(u["b"])({path:e});return t},IsRechage:function(e){return 1===this.uid||(!this.accessFilter("/v1/api/manager/recharge")||e!==this.uid)},rechargeType:function(){this.recharge.number=0},handleEdit:function(e){this.dialogType="edit",this.pwdTip="密码不修改不用填写",this.manager.password="",this.manager.id=e.id,this.manager.username=e.username,this.manager.nickname=e.nickname,this.manager.comment=e.comment,e.groups?this.manager.role=e.groups.map((function(e){return parseInt(e.id)})):this.manager.role=[],this.dialogVisible=!0},handleChange:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["g"])();case 2:a=e.sent,n=a.data,this.gold=n.gold/100,this.card=n.card,this.recharge.id=t.id,this.dialogChange=!0;case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleAdd:function(){this.dialogType="add",this.pwdTip="密码格式6到12位的大小写和数字",this.manager=Object.assign({},d),this.dialogVisible=!0},handleStatus:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["f"])(t.id,t.status);case 2:if(a=e.sent,n=a.status,r=a.data,i=a.msg,0===n){e.next=8;break}return e.abrupt("return",this.$message.error(i));case 8:this.$message.success("更改成功"),this.list=this.list.map((function(e){return e.id===t.id&&(e.status=r.status),e}));case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),confirmRecharge:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(/^(^-?\d+$)$/.test(this.recharge.number)){e.next=2;break}return e.abrupt("return",this.$message.error("充值数量有误"));case 2:return t={id:this.recharge.id,type:this.recharge.type,number:this.recharge.number},"1"===this.recharge.type&&(t.number=100*t.number),console.log(t),e.next=7,Object(o["m"])(t);case 7:if(a=e.sent,n=a.status,r=a.msg,0===n){e.next=12;break}return e.abrupt("return",this.$message.error(r));case 12:this.dialogChange=!1,this.$message.success("充值成功"),this.list=this.list.map((function(e){return e.id===i.recharge.id&&("1"===i.recharge.type?(e.gold+=parseInt(t.number),e.gold<0&&(e.gold=0)):(e.card+=parseInt(t.number),e.card<0&&(e.card=0))),e}));case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),confirm:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,i,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==this.manager.account){e.next=3;break}return this.$message.error("请输入账号"),e.abrupt("return",!1);case 3:if(""!==this.manager.pwd){e.next=6;break}return this.$message.error("请输入密码"),e.abrupt("return",!1);case 6:if(t={},this.manager.id+""!=="0"){e.next=13;break}return e.next=10,Object(o["a"])(this.manager);case 10:t=e.sent,e.next=16;break;case 13:return e.next=15,Object(o["d"])(this.manager);case 15:t=e.sent;case 16:if(a=t,n=a.status,r=a.data,i=a.msg,0===n){e.next=19;break}return e.abrupt("return",this.$message.error(i));case 19:this.manager.id+""==="0"?(this.list||(this.list=[]),this.list.unshift(r)):this.list=this.list.map((function(e){return e.id+""===s.manager.id&&(e=r),e})),this.dialogVisible=!1,this.$notify({title:"保存成功",dangerouslyUseHTMLString:!0,message:"\n            <div>登录账户: ".concat(this.manager.username,"</div>\n          "),type:"success"});case 22:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchData:function(){var e=this;this.listLoading=!0,Object(o["i"])(this.page,this.size).then((function(t){e.listLoading=!1;var a=t.status,n=t.data,r=t.msg;if(0!==a)return e.$message.error(r);e.total=n.total,e.list=n.manager,e.group=n.group}))}}},p=m,h=(a("b26b"),a("2877")),f=Object(h["a"])(p,n,r,!1,null,"0ded6914",null);t["default"]=f.exports},aad2:function(e,t,a){"use strict";var n=a("2430"),r=a.n(n);r.a},b26b:function(e,t,a){"use strict";var n=a("ba46"),r=a.n(n);r.a},ba46:function(e,t,a){}}]);